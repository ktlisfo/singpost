import"./modulepreload-polyfill.c7c6310f.js";const E=new URLSearchParams(window.location.search),I=`${E.get("fname")}.json`,_=E.get("car_id");console.log(`fname: ${I}`);console.log(`carID : ${_}`);async function O(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`JSON \uC77D\uAE30 \uC624\uB958: ${t.status} ${t.statusText}`);return(await t.json()).result.filter(n=>n.CAR_NUM===_).map(n=>{const{Y:s,X:a,ZIP_CODE:u,ADDRESS_FULL:d,OPEN_TIME:r,CLOSE_TIME:c,ORDER_VOLUME:m,BOX_NUM:l,OPT_ARR_TIME_HM:p,EST_PROC_TIME:f}=n,g=parseFloat(s),C=parseFloat(a),y=u,B=d,D=P(parseInt(r)),b=F(parseInt(c)),M=parseFloat(m),R=parseInt(l),k=p,v=parseInt(f);return{latitude:g,longitude:C,zip_code:y,address:B,open_time:D,close_time:b,order_volume:M,box_num:R,arrival_time:k,dwell_time:v}})}catch(t){return console.error("JSON \uC77D\uAE30 \uC624\uB958:",t),[]}}async function S(){const e=new google.maps.Map(document.getElementById("map"),{zoom:4}),t=new google.maps.InfoWindow;try{const o=await O(`/singpost/data/input-data/${I}`);o.length>0?L(o,e,t):console.error("\uB370\uC774\uD130\uB97C \uBD88\uB7EC\uC624\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4.")}catch(o){console.error("\uB370\uC774\uD130 \uB85C\uB529 \uC624\uB958:",o)}}function L(e,t,o){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s=new google.maps.DirectionsRenderer({draggable:!1,map:t,panel:document.getElementById("panel"),suppressMarkers:!1,suppressInfoWindows:!0,markerOptions:{icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:"white",fillOpacity:1,strokeWeight:3,strokeColor:"blue",scale:5},zIndex:0}});s.addListener("directions_changed",()=>{const r=s.getDirections();r&&U(r)});const a=[];e.slice(1,e.length-1).forEach(r=>{const c={location:new google.maps.LatLng(r.latitude,r.longitude)};a.push(c)});const u={origin:{lat:e[0].latitude,lng:e[0].longitude},destination:{lat:e[e.length-1].latitude,lng:e[e.length-1].longitude},waypoints:a,travelMode:google.maps.TravelMode.DRIVING,avoidTolls:!0};new google.maps.DirectionsService().route(u,(r,c)=>{c===google.maps.DirectionsStatus.OK&&r?(s.setDirections(r),e.forEach((m,l)=>{const p=l===0?"A":n[l],f=$(e[l].arrival_time),g=A(e,p,l,t,f),C=N(m);g.addListener("click",()=>{o.setContent(C),o.open(t,g)})})):console.error("\uACBD\uB85C \uC694\uCCAD \uC2E4\uD328:",c)})}function A(e,t,o,n,s){const a=o===0?e.length:e.length-o,u=T(s);return new google.maps.Marker({position:new google.maps.LatLng(e[o].latitude,e[o].longitude),map:n,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:u,fillOpacity:1,strokeWeight:2,scale:10},label:{text:t},zIndex:a})}function $(e){const t=parseInt(e.split(":")[0]);return t>=0&&t<=11?1:t>=12&&t<=14?2:t>=15&&t<=17?3:4}function T(e){switch(e){case 1:return"red";case 2:return"orange";case 3:return"yellow";case 4:return"#3ADF00";default:return"black"}}function P(e){if(e==0)return"00:00";{const t=Math.floor(e/60),o=e%60;return o==0?t+":00":t+":"+o}}function F(e){if(e>=1440)return"23:59";if(e==0)return"00:00";{const t=Math.floor(e/60),o=e%60;return o==0?t+":00":t+":"+o}}function N(e){return`
  <strong>- Zipcode: </strong>${e.zip_code}<br>
  <strong>- Address: </strong>${e.address}<br>
  <strong>- Arrival Time: </strong>${e.arrival_time}<br>
  <strong>- Dwell Time: </strong>${e.dwell_time}<br>
  <strong>- Items: </strong>${e.box_num}<br>
  <strong>- Total Weight: </strong>${e.order_volume}<br>
  <strong>- Requested time from: </strong>${e.open_time}<br>
  <strong>- Requested time to: </strong>${e.close_time}<br>
  `}function U(e){let t=0;const o=e.routes[0];if(!!o){for(let n=0;n<o.legs.length;n++)t+=o.legs[n].distance.value;t=t/1e3,document.getElementById("total").innerHTML=t+" km"}}const h=document.getElementById("accordian-header"),w=document.querySelector(".arrow-icon"),i=document.getElementById("sidebar");document.getElementById("map");if(h&&w&&i){let e=!1;h.addEventListener("click",()=>{e?(i.style.maxHeight="0",i.addEventListener("transitionend",()=>{i.style.padding="0"},{once:!0})):(i.style.maxHeight="50%",i.style.padding="1rem"),e=!e,w.style.transform=e?"rotate(180deg)":"rotate(0deg)"})}else console.error("Required elements not found");window.initMap=S;
